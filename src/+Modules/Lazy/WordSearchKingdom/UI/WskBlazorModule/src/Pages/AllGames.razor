@page "/wsk/allgames"
@layout MainLayoutLanding
@inject IStringLocalizer<AllGames> Localize


<MudText Typo="Typo.h4" Align="Align.Center" Style="text-wrap: balance;">Word Search Kingdom - All Games</MudText>
<MudPaper Class="mt-4">
    <MudButton Class="mt-8" FullWidth="true" Variant="Variant.Filled" Color="Color.Primary" OnClick=@NavigateToNewGame>Create New Game</MudButton>
    <AllGamesComponent Games=@_games />
</MudPaper>


@code {
    private List<GameViewModel> _games = new();
    
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();                     
        var request = new GamesGetAllRequest();
        _games = await WskDataService.GamesGetAllAsync(request);
    }


    protected async Task NavigateToNewGame()
    {
        NavigationManager.NavigateTo("/wsk/newgame");
    }
}
